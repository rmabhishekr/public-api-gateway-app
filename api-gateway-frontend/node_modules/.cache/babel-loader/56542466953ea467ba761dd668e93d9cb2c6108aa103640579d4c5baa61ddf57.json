{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SubmitApiUrl(_ref){let{token,onSubmitSuccess}=_ref;const[url,setUrl]=useState(\"\");const[response,setResponse]=useState(\"\");const[error,setError]=useState(\"\");const backendUrl=process.env.REACT_APP_BACKEND_URL;const handleSubmit=async e=>{e.preventDefault();setError(\"\");try{const res=await axios.post(\"\".concat(backendUrl,\"/api/add\"),{url},{headers:{Authorization:\"Bearer \".concat(token)}});setResponse(JSON.stringify(res.data,null,2));setUrl(\"\");onSubmitSuccess&&onSubmitSuccess();// refresh dashboard after add\n}catch(err){var _err$res,_err$res$data,_err$res2,_err$res2$data;setError(((_err$res=err.res)===null||_err$res===void 0?void 0:(_err$res$data=_err$res.data)===null||_err$res$data===void 0?void 0:_err$res$data.error)||((_err$res2=err.res)===null||_err$res2===void 0?void 0:(_err$res2$data=_err$res2.data)===null||_err$res2$data===void 0?void 0:_err$res2$data.message)||err.message||\"Failed to submit. Check URL or token.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Public API URL\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{value:url,onChange:e=>setUrl(e.target.value),placeholder:\"Public JSON API URL\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),response&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"API Response:\"}),/*#__PURE__*/_jsx(\"pre\",{style:{background:\"#eee\",padding:\"10px\"},children:response})]})]});}export default SubmitApiUrl;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","SubmitApiUrl","_ref","token","onSubmitSuccess","url","setUrl","response","setResponse","error","setError","backendUrl","process","env","REACT_APP_BACKEND_URL","handleSubmit","e","preventDefault","res","post","concat","headers","Authorization","JSON","stringify","data","err","_err$res","_err$res$data","_err$res2","_err$res2$data","message","children","style","color","onSubmit","value","onChange","target","placeholder","required","type","background","padding"],"sources":["C:/Users/abhir/OneDrive/Desktop/New folder/api-gateway-app/frontend/api-gateway-frontend/src/components/SubmitApiUrl.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction SubmitApiUrl({ token, onSubmitSuccess }) {\r\n  const [url, setUrl] = useState(\"\");\r\n  const [response, setResponse] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const backendUrl = process.env.REACT_APP_BACKEND_URL;\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    try {\r\n      const res = await axios.post(\r\n        `${backendUrl}/api/add`,\r\n        { url },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setResponse(JSON.stringify(res.data, null, 2));\r\n      setUrl(\"\");\r\n      onSubmitSuccess && onSubmitSuccess(); // refresh dashboard after add\r\n    } catch (err) {\r\n      setError(\r\n        err.res?.data?.error ||\r\n          err.res?.data?.message ||\r\n          err.message ||\r\n          \"Failed to submit. Check URL or token.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Add Public API URL</h2>\r\n      {error && <div style={{ color: \"red\" }}>{error}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          value={url}\r\n          onChange={(e) => setUrl(e.target.value)}\r\n          placeholder=\"Public JSON API URL\"\r\n          required\r\n        />\r\n        <button type=\"submit\">Submit</button>\r\n      </form>\r\n      {response && (\r\n        <div>\r\n          <h3>API Response:</h3>\r\n          <pre style={{ background: \"#eee\", padding: \"10px\" }}>{response}</pre>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SubmitApiUrl;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAA6B,IAA5B,CAAEC,KAAK,CAAEC,eAAgB,CAAC,CAAAF,IAAA,CAC9C,KAAM,CAACG,GAAG,CAAEC,MAAM,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAgB,UAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,CAEpD,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAI,CACF,KAAM,CAAAQ,GAAG,CAAG,KAAM,CAAAtB,KAAK,CAACuB,IAAI,IAAAC,MAAA,CACvBT,UAAU,aACb,CAAEN,GAAI,CAAC,CACP,CAAEgB,OAAO,CAAE,CAAEC,aAAa,WAAAF,MAAA,CAAYjB,KAAK,CAAG,CAAE,CAClD,CAAC,CACDK,WAAW,CAACe,IAAI,CAACC,SAAS,CAACN,GAAG,CAACO,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC9CnB,MAAM,CAAC,EAAE,CAAC,CACVF,eAAe,EAAIA,eAAe,CAAC,CAAC,CAAE;AACxC,CAAE,MAAOsB,GAAG,CAAE,KAAAC,QAAA,CAAAC,aAAA,CAAAC,SAAA,CAAAC,cAAA,CACZpB,QAAQ,CACN,EAAAiB,QAAA,CAAAD,GAAG,CAACR,GAAG,UAAAS,QAAA,kBAAAC,aAAA,CAAPD,QAAA,CAASF,IAAI,UAAAG,aAAA,iBAAbA,aAAA,CAAenB,KAAK,KAAAoB,SAAA,CAClBH,GAAG,CAACR,GAAG,UAAAW,SAAA,kBAAAC,cAAA,CAAPD,SAAA,CAASJ,IAAI,UAAAK,cAAA,iBAAbA,cAAA,CAAeC,OAAO,GACtBL,GAAG,CAACK,OAAO,EACX,uCACJ,CAAC,CACH,CACF,CAAC,CAED,mBACE/B,KAAA,QAAAgC,QAAA,eACElC,IAAA,OAAAkC,QAAA,CAAI,oBAAkB,CAAI,CAAC,CAC1BvB,KAAK,eAAIX,IAAA,QAAKmC,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,CAAEvB,KAAK,CAAM,CAAC,cACrDT,KAAA,SAAMmC,QAAQ,CAAEpB,YAAa,CAAAiB,QAAA,eAC3BlC,IAAA,UACEsC,KAAK,CAAE/B,GAAI,CACXgC,QAAQ,CAAGrB,CAAC,EAAKV,MAAM,CAACU,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAE,CACxCG,WAAW,CAAC,qBAAqB,CACjCC,QAAQ,MACT,CAAC,cACF1C,IAAA,WAAQ2C,IAAI,CAAC,QAAQ,CAAAT,QAAA,CAAC,QAAM,CAAQ,CAAC,EACjC,CAAC,CACNzB,QAAQ,eACPP,KAAA,QAAAgC,QAAA,eACElC,IAAA,OAAAkC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBlC,IAAA,QAAKmC,KAAK,CAAE,CAAES,UAAU,CAAE,MAAM,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAX,QAAA,CAAEzB,QAAQ,CAAM,CAAC,EAClE,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAN,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}